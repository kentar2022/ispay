<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phrase Windows</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="style.css">
<style>
    .window {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px;
    }
    .active {
        display: block;
    }
    #nextBtn {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        cursor: pointer;
    }

</style>
</head>
<body>
<div id="windowsContainer"></div>
<button id="nextBtn">Next Phrase</button>
<div id="priceDisplay"></div>

<div class="progress-container">
    <div class="progress" id="progress"></div>
</div>

<script src="ScoreManager.js"></script>
<script src="progressbar.js"></script>
<script>
$(document).ready(function() {
    var phrases = []; 
    var currentWindowIndex = 0; 

    
    $.ajax({
        url: 'load_phrases.php', 
        method: 'GET',
        dataType: 'json',
        success: function(data) {
            console.log('Получены данные:', data); 
            phrases = data;
            displayWindow(currentWindowIndex); 
        },
        error: function(error) {
            console.error('Ошибка при загрузке фраз:', error);
        }
    });

    
    function displayWindow(index) {
        // Получаем текущее окно
        var currentWindow = $('.window');

       
        if (currentWindow.length > 0) {
            currentWindow.text(phrases[index].text);
        } else { 
            var windowContent = '<div class="window">' + phrases[index].text + '</div>';
            $('#windowsContainer').append(windowContent);
        }

        
        $('.window').removeClass('active');
        $('.window').eq(index).addClass('active');

        // Обновляем шкалу прогресса
        updateProgressBar(index);
    }
   
    $('#nextBtn').click(function() {
        currentWindowIndex++; 

        
        if (currentWindowIndex >= phrases.length) {
            currentWindowIndex = 0; 
        }

        
        displayWindow(currentWindowIndex);
    });

    // Функция для обновления шкалы прогресса
    function updateProgressBar(index) {
        var progressHeight = (index + 1) * (100 / phrases.length);
        $('#progress').css('height', progressHeight + '%');
    }
});

</script>


</body>
</html>
